<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.2.1 (456793)"/><meta name="author" content="Mr.包子"/><meta name="created" content="2020-11-03 15:45:26 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2020-11-04 10:28:01 +0000"/><title>9-Tree Shaking (删除未调用导出对象)</title></head><body><div>
<span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">生产模式下自动优化，主动删除未调用的导出对象</span></div><div><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);"
/><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">但是在</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);"> none</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">模式下仍会把模块导出到</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">bundle</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">里</span></div><div><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);"
/><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">但是可以通过配置</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">optimization</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">进行优化</span></div><div><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">
usedExports - </span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">打包结果中只导出外部用到的成员；</span></div><div><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">
minimize - </span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">压缩打包结果</span></div><div><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);"><br/></span></div><div><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);"
/></div><div><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);"
/><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">合并模块</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">(Scope Hoisting)</span></div><div><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);"
/><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">通常打包后文件会根据一个模块导出一个模块函数，这个时候一个模块一个函数太过浪费，所以</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">webpack</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">可以讲多个模块进行合并后再导出。</span></div><div><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">
concatenateModules</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">：</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">true  - </span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">尽可能合并多模块到一个模块中</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">.</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">实际也是作用域提升，这样能减小打包体积。</span></div><div><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);"><br/></span></div><div><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);"
/></div><div><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">
webpack</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">打包依赖的</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">ESmodule</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">规范进行分析和执行的，但是一般为了兼容性会使用</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">Babel-loader</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">来进行代码降级，这个时候会造成降级后的代码默认执行的是</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">CommonJS</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">规范，这个时候就没办法分析时候有未调用代码了。但是最新的</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">babel-loader</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">已兼容了这个问题，会自动检查当前环境，如果使用</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">webpack</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">则会保持原有的</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">ESmodule,</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">可以继续</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">TreeShake</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">。如果是旧版的，可以在配置具体的</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">babel/preset-env</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">中指明模式</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);"> mode='none'</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">，就可以继续使用</span><span style="font: 14.0px 'Helvetica Neue'; color: rgba(0, 0, 0, 0.85);">TreeShake</span><span style="font: 14.0px 'PingFang SC'; color: rgba(0, 0, 0, 0.85);">特性。</span></div></body></html>